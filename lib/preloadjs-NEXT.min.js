/**
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/this.createjs=this.createjs||{};
(function(){function d(b,a,c){this.f=b;this.scope=a;this.priority=c}var a=function(){this.initialize()},c=a.prototype;a.initialize=function(b){b.addEventListener=c.addEventListener;b.removeEventListener=c.removeEventListener;b.removeAllEventListeners=c.removeAllEventListeners;b.hasEventListener=c.hasEventListener;b.dispatchEvent=c.dispatchEvent};c._listeners=null;c.initialize=function(){};c.addEventListener=function(b,a,c,e){var e=e||0,h=new d(a,c||this,e),f=this._listeners;if(!f)f=this._listeners=
{};var j=f[b];if(j){this.removeEventListener(b,a,c);b=0;for(a=j.length;b<a&&j[b].priority>=e;b++);j.splice(b,0,h)}else f[b]=[h]};c.removeEventListener=function(b,a,c){var e=this._listeners;if(e){var d=e[b];if(d)for(var c=c||this,f=0,j=d.length;f<j;f++){var k=d[f];if(k.f==a&&k.scope==c){j==1?delete e[b]:d.splice(f,1);break}}}};c.removeAllEventListeners=function(b){b?this._listeners&&delete this._listeners[b]:this._listeners=null};c.dispatchEvent=function(b,a,c){a&&a.apply(this,c);var a=false,e=this._listeners;
if(b&&e){typeof b=="string"&&(b={type:b,params:c});c=e[b.type];if(!c)return a;for(var e=0,d=c.length;e<d;e++)var f=c[e],a=a||f.f.apply(f.scope,[b])}return!!a};c.hasEventListener=function(b,a){return!!(a||this._listeners&&this._listeners[b])};c.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){var d=function(){this.init()};d.prototype={};var a=d.prototype;d.FILE_PATTERN=/(\w+:\/{2})?((?:\w+\.){2}\w+)?(\/?[\S]+\/|\/)?([\w\-\.%]+)(?:\.)(\w+)?(\?\S+)?/i;a.loaded=false;a.canceled=false;a.progress=0;a._item=null;a.onProgress=null;a.onLoadStart=null;a.onComplete=null;a.onError=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher&&createjs.EventDispatcher.initialize(a);
a.getItem=function(){return this._item};a.init=function(){};a.load=function(){};a.close=function(){};a._sendLoadStart=function(){this._isCanceled()||(this.onLoadStart&&this.onLoadStart({target:this}),this._listeners&&this.dispatchEvent("loadStart"))};a._sendProgress=function(a){if(!this._isCanceled()){var b;if(a instanceof Number)this.progress=a,b={loaded:this.progress,total:1};else if(b=a,this.progress=a.loaded/a.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;b.target=this;b.type=
"progress";this.onProgress&&this.onProgress(b);this._listeners&&this.dispatchEvent(b)}};a._sendComplete=function(){this._isCanceled()||(this.onComplete&&this.onComplete({target:this}),this._listeners&&this.dispatchEvent("complete"))};a._sendError=function(a){if(!this._isCanceled())a==null&&(a={}),a.target=this,this.onError&&this.onError(a),this._listeners&&this.dispatchEvent("error",null,a)};a._isCanceled=function(){return window.createjs==null||this.canceled?true:false};a._parseURI=function(a){return!a?
null:a.match(d.FILE_PATTERN)};a.toString=function(){return"[PreloadJS AbstractLoader]"};createjs.AbstractLoader=d})();this.createjs=this.createjs||{};
(function(){var d=function(b){this.init(b)},a=d.prototype=new createjs.AbstractLoader;d.VERSION="0.2.2";d.TIMEOUT_TIME=8E3;d.BINARY="binary";d.CSS="css";d.IMAGE="image";d.JAVASCRIPT="javascript";d.JSON="json";d.SOUND="sound";d.SVG="svg";d.TEXT="text";d.XML="xml";a.useXHR=true;a.stopOnError=false;a.maintainScriptOrder=true;a.addHeadTags=true;a.next=null;a.onFileLoad=null;a.onFileProgress=null;a._typeCallbacks=null;a._extensionCallbacks=null;a._loadStartWasDispatched=false;a._maxConnections=1;a._currentlyLoadingScript=
null;a._currentLoads=null;a._loadQueue=null;a._loadQueueBackup=null;a._loadItemsById=null;a._loadItemsBySrc=null;a._loadedResults=null;a._loadedRawResults=null;a._numItems=0;a._numItemsLoaded=0;a._scriptOrder=null;a._loadedScripts=null;a.init=function(b){this._numItems=this._numItemsLoaded=0;this._loadStartWasDispatched=this._paused=false;this._currentLoads=[];this._loadQueue=[];this._loadQueueBackup=[];this._scriptOrder=[];this._loadedScripts=[];this._loadItemsById={};this._loadItemsBySrc={};this._loadedResults=
{};this._loadedRawResults={};this._typeCallbacks={};this._extensionCallbacks={};this.useXHR=b!=false&&window.XMLHttpRequest!=null};a.removeAll=function(){this.remove()};a.remove=function(b){var a=null;b&&!(b instanceof Array)?a=[b]:b&&(a=b);b=false;if(a){for(;a.length;){for(var c=a.pop(),e=this.getResult(c),d=this._loadQueue.length-1;d>=0;d--)if(f=this._loadQueue[d].getItem(),f.id==c||f.src==c){this._loadQueue.splice(d,1)[0].cancel();break}for(d=this._loadQueueBackup.length-1;d>=0;d--)if(f=this._loadQueueBackup[d].getItem(),
f.id==c||f.src==c){this._loadQueueBackup.splice(d,1)[0].cancel();break}if(e)delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src],this._disposeItem(e);else for(var d=this._currentLoads.length-1;d>=0;d--){var f=this._currentLoads[d].getItem();if(f.id==c||f.src==c){this._currentLoads.splice(d,1)[0].cancel();b=true;break}}}b&&this._loadNext()}else{this.close();for(c in this._loadItemsById)this._disposeItem(this._loadItemsById[c]);this.initialize(this.useXHR)}};a.reset=function(){this.close();
for(var b in this._loadItemsById)this._disposeItem(this._loadItemsById[b]);b=[];for(i=0,l=this._loadQueueBackup.length;i<l;i++)b.push(this._loadQueueBackup[i].getItem());this.loadManifest(b,false)};d.isBinary=function(b){switch(b){case createjs.PreloadJS.IMAGE:case createjs.PreloadJS.BINARY:return true;default:return false}};a.installPlugin=function(b){if(!(b==null||b.getPreloadHandlers==null)){b=b.getPreloadHandlers();if(b.types!=null)for(var a=0,c=b.types.length;a<c;a++)this._typeCallbacks[b.types[a]]=
b.callback;if(b.extensions!=null)for(a=0,c=b.extensions.length;a<c;a++)this._extensionCallbacks[b.extensions[a]]=b.callback}};a.setMaxConnections=function(b){this._maxConnections=b;this._paused||this._loadNext()};a.loadFile=function(b,a){b==null?this._sendError({text:"PRELOAD_NO_FILE"}):(this._addItem(b),a!==false&&this.setPaused(false))};a.loadManifest=function(b,a){var c;if(b instanceof Array){if(b.length==0){this._sendError({text:"PRELOAD_MANIFEST_EMPTY"});return}c=b}else{if(b==null){this._sendError({text:"PRELOAD_MANIFEST_NULL"});
return}c=[b]}for(var d=0,h=c.length;d<h;d++)this._addItem(c[d],false);a!==false&&this.setPaused(false)};a.load=function(){this.setPaused(false)};a.getItem=function(b){return this._loadItemsById[b]||this._loadItemsBySrc[b]};a.getResult=function(b,a){var c=this._loadItemsById[b]||this._loadItemsBySrc[b];if(c==null)return null;c=c.id;return a&&this._loadedRawResults[c]?this._loadedRawResults[c]:this._loadedResults[c]};a.setPaused=function(b){(this._paused=b)||this._loadNext()};a.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();
this._scriptOrder.length=0;this._loadedScripts.length=0};a._addItem=function(b){var b=this._createLoadItem(b),a=this._createLoader(b);a!=null&&(this._loadQueue.push(a),this._loadQueueBackup.push(a),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&b.type==createjs.PreloadJS.JAVASCRIPT&&a instanceof createjs.XHRLoader&&(this._scriptOrder.push(b),this._loadedScripts.push(null)))};a._createLoadItem=function(b){var a;switch(typeof b){case "string":a={src:b};break;case "object":a=window.HTMLAudioElement&&
b instanceof HTMLAudioElement?{tag:b,src:a.tag.src,type:createjs.PreloadJS.SOUND}:b}a.result=null;b=this._parseURI(a.src);if(b!=null)a.ext=b[5];if(a.type==null)a.type=this._getTypeByExtension(a.ext);if(a.tag==null)a.tag=this._createTag(a.type);if(a.id==null||a.id=="")a.id=a.src;if(b=this._typeCallbacks[a.type]||this._extensionCallbacks[a.ext]){b=b(a.src,a.type,a.id,a.data);if(b===false)return null;else if(b!==true){if(b.src!=null)a.src=b.src;if(b.id!=null)a.id=b.id;if(b.tag!=null&&b.tag.load instanceof
Function)a.tag=b.tag}if(b.type)a.type=b.type;b=this._parseURI(a.src);if(b!=null)a.ext=b[5]}this._loadItemsById[a.id]=a;return this._loadItemsBySrc[a.src]=a};a._createLoader=function(b){var a=this.useXHR;switch(b.type){case createjs.PreloadJS.JSON:case createjs.PreloadJS.XML:case createjs.PreloadJS.TEXT:a=true;break;case createjs.PreloadJS.SOUND:a=false}return a?new createjs.XHRLoader(b):new createjs.TagLoader(b)};a._loadNext=function(){if(!this._paused){if(!this._loadStartWasDispatched)this._sendLoadStart(),
this._loadStartWasDispatched=true;if(this._numItems==this._numItemsLoaded)this.loaded=true,this._sendComplete(),this.next&&this.next.load&&this.next.load();for(var b=0,a=this._loadQueue.length;b<a;b++){if(this._currentLoads.length>=this._maxConnections)break;var c=this._loadQueue[b];if(this.maintainScriptOrder&&c instanceof createjs.TagLoader&&c.getItem().type==createjs.PreloadJS.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=true}this._loadQueue.splice(b,1);this._loadItem(c);
b--;a--}}};a._loadItem=function(b){b.onProgress=createjs.PreloadJS.proxy(this._handleProgress,this);b.onComplete=createjs.PreloadJS.proxy(this._handleFileComplete,this);b.onError=createjs.PreloadJS.proxy(this._handleFileError,this);this._currentLoads.push(b);b.load()};a._handleFileError=function(b){var a=b.target;this._numItemsLoaded++;this._updateProgress();b={item:a.getItem()};this._sendError(b);this.stopOnError||(this._removeLoadItem(a),this._loadNext())};a._handleFileComplete=function(b){var b=
b.target,a=b.getItem();this._loadedResults[a.id]=b.getResult();b instanceof createjs.XHRLoader&&(this._loadedRawResults[a.id]=b.getRawResult());this._removeLoadItem(b);if(this.maintainScriptOrder&&a.type==createjs.PreloadJS.JAVASCRIPT)if(b instanceof createjs.TagLoader)this._currentlyLoadingScript=false;else{this._loadedScripts[this._scriptOrder.indexOf(a)]=a;this._checkScriptLoadOrder(b);return}this._processFinishedLoad(a)};a._processFinishedLoad=function(b){this._numItemsLoaded++;b.completeHandler&&
b.completeHandler(b);this._updateProgress();this._sendFileComplete(b);this._loadNext()};a._checkScriptLoadOrder=function(){for(var b=this._loadedScripts.length,a=0;a<b;a++){var c=this._loadedScripts[a];if(c===null)break;c!==true&&(this._processFinishedLoad(c),this._loadedScripts[a]=true,a--,b--)}};a._removeLoadItem=function(b){for(var a=this._currentLoads.length,c=0;c<a;c++)if(this._currentLoads[c]==b){this._currentLoads.splice(c,1);break}};a._handleProgress=function(b){b=b.target;this._sendFileProgress(b.getItem(),
b.progress);this._updateProgress()};a._updateProgress=function(){var b=this._numItemsLoaded/this._numItems,a=this._numItems-this._numItemsLoaded;if(a>0){for(var c=0,d=0,h=this._currentLoads.length;d<h;d++)c+=this._currentLoads[d].progress;b+=c/a*(a/this._numItems)}this._sendProgress(b)};a._disposeItem=function(a){delete this._loadedResults[a.id];delete this._loadedRawResults[a.id];delete this._loadItemsById[a.id];delete this._loadItemsBySrc[a.src]};a._createTag=function(a){switch(a){case createjs.PreloadJS.IMAGE:return document.createElement("img");
case createjs.PreloadJS.SOUND:return a=document.createElement("audio"),a.autoplay=false,a;case createjs.PreloadJS.JAVASCRIPT:return a=document.createElement("script"),a.type="text/javascript",a;case createjs.PreloadJS.CSS:return a=this.useXHR?document.createElement("style"):document.createElement("link"),a.rel="stylesheet",a.type="text/css",a;case createjs.PreloadJS.SVG:return this.useXHR?a=document.createElement("svg"):(a=document.createElement("object"),a.type="image/svg+xml"),a}return null};a._getTypeByExtension=
function(a){switch(a){case "jpeg":case "jpg":case "gif":case "png":case "webp":case "bmp":return createjs.PreloadJS.IMAGE;case "ogg":case "mp3":case "wav":return createjs.PreloadJS.SOUND;case "json":return createjs.PreloadJS.JSON;case "xml":return createjs.PreloadJS.XML;case "css":return createjs.PreloadJS.CSS;case "js":return createjs.PreloadJS.JAVASCRIPT;case "svg":return createjs.PreloadJS.SVG;default:return createjs.PreloadJS.TEXT}};a._sendFileProgress=function(a,c){if(this._isCanceled())this._cleanUp();
else{var d={target:this,progress:c,loaded:c,total:1,item:a};this.onFileProgress&&this.onFileProgress(d);this._listeners&&this.dispatchEvent("fileProgress",null,d)}};a._sendFileComplete=function(a){this._isCanceled()||(a={target:this,item:a,result:this._loadedResults[a.id],rawResult:this._loadedRawResults[a.id]},this.onFileLoad&&this.onFileLoad(a),this._listeners&&this.dispatchEvent("fileLoad",null,a))};a.toString=function(){return"[PreloadJS]"};d.proxy=function(a,c){return function(d){return a.apply(c,
arguments)}};createjs.PreloadJS=d;var c=function(){};c.init=function(){var a=navigator.userAgent;c.isFirefox=a.indexOf("Firefox")>-1;c.isOpera=window.opera!=null;c.isChrome=a.indexOf("Chrome")>-1;c.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1};c.init();createjs.PreloadJS.BrowserDetect=c;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){if(this==null)throw new TypeError;var c=Object(this),d=c.length>>>0;if(d===0)return-1;var e=0;arguments.length>1&&(e=Number(arguments[1]),
e!=e?e=0:e!=0&&e!=Infinity&&e!=-Infinity&&(e=(e>0||-1)*Math.floor(Math.abs(e))));if(e>=d)return-1;for(e=e>=0?e:Math.max(d-Math.abs(e),0);e<d;e++)if(e in c&&c[e]===a)return e;return-1}})();this.createjs=this.createjs||{};
(function(){var d=function(a){this.init(a)},a=d.prototype=new createjs.AbstractLoader;a._loadTimeout=null;a._tagCompleteProxy=null;a._isAudio=false;a._tag=null;a.init=function(a){this._item=a;this._tag=a.tag;this._isAudio=window.HTMLAudioElement&&a.tag instanceof HTMLAudioElement;this._tagCompleteProxy=createjs.PreloadJS.proxy(this._handleLoad,this)};a.getResult=function(){return this._tag};a.cancel=function(){this.canceled=true;this._clean();var a=this.getItem();if(a!=null)a.src=null};a.load=function(){var a=
this._item,b=this._tag;clearTimeout(this._loadTimeout);this._loadTimeout=setTimeout(createjs.PreloadJS.proxy(this._handleTimeout,this),createjs.PreloadJS.TIMEOUT_TIME);if(this._isAudio)b.src=null,b.preload="auto";b.onerror=createjs.PreloadJS.proxy(this._handleError,this);this._isAudio?(b.onstalled=createjs.PreloadJS.proxy(this._handleStalled,this),b.addEventListener("canplaythrough",this._tagCompleteProxy,false)):(b.onload=createjs.PreloadJS.proxy(this._handleLoad,this),b.onreadystatechange=createjs.PreloadJS.proxy(this._handleReadyStateChange,
this));switch(a.type){case createjs.PreloadJS.CSS:b.href=a.src;break;case createjs.PreloadJS.SVG:b.data=a.src;break;default:b.src=a.src}if(a.type==createjs.PreloadJS.SVG||a.type==createjs.PreloadJS.JAVASCRIPT||a.type==createjs.PreloadJS.CSS)(document.body||document.getElementsByTagName("body")[0]).appendChild(b);b.load!=null&&b.load()};a._handleTimeout=function(){this._clean();this._sendError({reason:"PRELOAD_TIMEOUT"})};a._handleStalled=function(){};a._handleError=function(){this._clean();this._sendError()};
a._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);this.getItem().tag.readyState=="loaded"&&this._handleLoad()};a._handleLoad=function(){if(!this._isCanceled()){var a=this.getItem(),b=a.tag;if(!(this.loaded||this.isAudio&&b.readyState!==4))this.loaded=true,a.type==createjs.PreloadJS.SVG&&(document.body||document.getElementsByTagName("body")[0]).removeChild(b),this._clean(),this._sendComplete()}};a._clean=function(){clearTimeout(this._loadTimeout);var a=this.getItem().tag;a.onload=
null;a.removeEventListener&&a.removeEventListener("canplaythrough",this._tagCompleteProxy,false);a.onstalled=null;a.onprogress=null;a.onerror=null;a.parentNode&&a.parentNode.removeChild(a)};a.toString=function(){return"[PreloadJS TagLoader]"};createjs.TagLoader=d})();this.createjs=this.createjs||{};
(function(){var d=function(a){this.init(a)},a=d.prototype=new createjs.AbstractLoader;a._request=null;a._loadTimeout=null;a._xhrLevel=1;a._response=null;a._rawResponse=null;a.init=function(a){this._item=a;this._createXHR(a)};a.getResult=function(){return this._response};a.getRawResult=function(){return this._rawResponse};a.cancel=function(){this.canceled=true;this._clean();this._request.abort()};a.load=function(){if(this._request==null)this._handleError();else{this._request.onloadstart=createjs.PreloadJS.proxy(this._handleLoadStart,
this);this._request.onprogress=createjs.PreloadJS.proxy(this._handleProgress,this);this._request.onabort=createjs.PreloadJS.proxy(this._handleAbort,this);this._request.onerror=createjs.PreloadJS.proxy(this._handleError,this);this._request.ontimeout=createjs.PreloadJS.proxy(this._handleTimeout,this);if(this._xhrLevel==1)this._loadTimeout=setTimeout(createjs.PreloadJS.proxy(this._handleTimeout,this),createjs.PreloadJS.TIMEOUT_TIME);this._request.onload=createjs.PreloadJS.proxy(this._handleLoad,this);
this._request.onreadystatechange=createjs.PreloadJS.proxy(this._handleReadyStateChange,this);try{this._request.send()}catch(a){this._sendError({source:a})}}};a._handleProgress=function(a){a.loaded>0&&a.total==0||this._sendProgress({loaded:a.loaded,total:a.total})};a._handleLoadStart=function(){clearTimeout(this._loadTimeout);this._sendLoadStart()};a._handleAbort=function(){this._clean();this._sendError()};a._handleError=function(){this._clean();this._sendError()};a._handleReadyStateChange=function(){this._request.readyState==
4&&this._handleLoad()};a._handleLoad=function(){if(!this.loaded)this.loaded=true,this._checkError()?(this._response=this._getResponse(),this._clean(),this._generateTag()&&this._sendComplete()):this._handleError()};a._handleTimeout=function(){this._clean();this._sendError()};a._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return false}return true};a._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;
try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(b){}return null};a._createXHR=function(a){var b=document.createElement("a");b.href=a.src;var d=document.createElement("a");d.href=location.href;var b=b.hostname!=""&&(b.port!=d.port||b.protocol!=d.protocol||b.hostname!=d.hostname),g;if(b&&window.XDomainRequest)g=new XDomainRequest;else if(window.XMLHttpRequest)g=new XMLHttpRequest;else try{g=
new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){try{g=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(h){try{g=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){return false}}}a.type==createjs.PreloadJS.TEXT&&g.overrideMimeType&&g.overrideMimeType("text/plain; charset=x-user-defined");this._xhrLevel=typeof g.responseType==="string"?2:1;g.open("GET",a.src,true);b&&g instanceof XMLHttpRequest&&this._xhrLevel==1&&g.setRequestHeader("Origin",location.origin);if(createjs.PreloadJS.isBinary(a.type))g.responseType=
"arraybuffer";this._request=g;return true};a._clean=function(){clearTimeout(this._loadTimeout);var a=this._request;a.onloadstart=null;a.onprogress=null;a.onabort=null;a.onerror=null;a.onload=null;a.ontimeout=null;a.onloadend=null;a.onreadystatechange=null;clearInterval(this._checkLoadInterval)};a._generateTag=function(){var a=this._item.tag;switch(this._item.type){case createjs.PreloadJS.IMAGE:return a.onload=createjs.PreloadJS.proxy(this._handleTagReady,this),a.src=this._item.src,this._rawResponse=
this._response,this._response=a,false;case createjs.PreloadJS.JAVASCRIPT:a=document.createElement("script");this._rawResponse=a.text=this._response;this._response=a;break;case createjs.PreloadJS.CSS:document.getElementsByTagName("head")[0].appendChild(a);if(a.styleSheet)a.styleSheet.cssText=this._response;else{var b=document.createTextNode(this._response);a.appendChild(b)}this._rawResponse=this._response;this._response=a;break;case createjs.PreloadJS.XML:this._response=b=this._parseXML(this._response,
"text/xml");break;case createjs.PreloadJS.SVG:b=this._parseXML(this._response,"image/svg+xml");this._rawResponse=this._response;a.appendChild(b.documentElement);this._response=a;break;case createjs.PreloadJS.JSON:try{eval("json="+this._response)}catch(d){break}this._rawResponse=this._response;this._response=void 0}return true};a._parseXML=function(a,b){var d;window.DOMParser?d=(new DOMParser).parseFromString(a,b):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async=false,d.loadXML(a));return d};a._handleTagReady=
function(){this._sendComplete()};a.toString=function(){return"[PreloadJS XHRLoader]"};createjs.XHRLoader=d})();
